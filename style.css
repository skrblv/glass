@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap');

:root {
    --text-color: #e0e6f0;
    --highlight-color: rgba(230, 240, 255, 0.9);
}

body, html {
    margin: 0; padding: 0; width: 100%; height: 100vh;
    overflow: hidden; background: #0c0a1d;
    font-family: 'Roboto', sans-serif; color: var(--text-color);
}

#scene-container {
    position: relative; width: 100%; height: 100%; perspective: 1200px;
    background: radial-gradient(circle at 50% 50%, rgba(38, 43, 75, 0.9) 0%, #0c0a1d 65%);
}

.shard {
    position: absolute;
    top: 0; left: 0; width: 100%; height: 100%;
    display: block; text-decoration: none; color: var(--text-color);
    transform-style: preserve-3d;
}

.shard {
    backdrop-filter: blur(4px) brightness(1.2);
    -webkit-backdrop-filter: blur(4px) brightness(1.2);
    box-shadow: 
        inset 0 0 1px 1px rgba(220, 230, 255, 0.4),
        inset 0 0 25px rgba(10, 12, 30, 0.7),
        0 20px 50px rgba(0, 0, 0, 0.3);
    border: 1px solid rgba(180, 190, 220, 0.3);
    transition: border-color 0.4s, box-shadow 0.4s;
}

.shard::before {
    content: ''; position: absolute; top: 0; left: 0;
    width: 100%; height: 100%;
    background-size: cover, cover; background-position: center, center;
    background-blend-mode: screen; 
    z-index: -1;
    opacity: 0.6; transition: opacity 0.4s;
    clip-path: inherit; 
    background-image: radial-gradient(circle at 50% 50%, rgba(100, 120, 200, 0.6), transparent 70%);
}

.shard:hover {
    border-color: var(--highlight-color);
    box-shadow: 
        inset 0 0 1px 1px var(--highlight-color),
        inset 0 0 15px rgba(10, 12, 30, 0.5),
        0 25px 60px rgba(0, 0, 0, 0.4);
}
.shard:hover::before { opacity: 1; }

.shard-ui {
    position: absolute; display: flex; align-items: center; gap: 12px;
    z-index: 2; transform: translateZ(25px); text-shadow: 0 0 10px rgba(0, 0, 0, 1);
}
.shard-icon {
    width: 38px; height: 38px; border: 1px solid rgba(255, 255, 255, 0.4); border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 24px; font-weight: 700; background: rgba(0,0,0,0.25);
}
.shard-title { font-size: 14px; font-weight: 300; line-height: 1.4; opacity: 0.9; }

.particles { position: absolute; inset: 0; pointer-events: none; }
.particle { position: absolute; background: white; border-radius: 50%; box-shadow: 0 0 6px rgba(255, 255, 255, 0.8); animation: drift infinite alternate ease-in-out; }
@keyframes drift { from { transform: translateY(-15px); } to { transform: translateY(15px); opacity: 0.2; } }

#shard-1::before { background-image: url('https://static0.gamerantimages.com/wordpress/wp-content/uploads/henry-cavill-superman-batman-v-superman-dawn-of-justice.jpg?w=1200&h=628&fit=crop'), radial-gradient(circle at 50% 50%, rgba(100, 120, 200, 0.6), transparent 70%); }
#shard-2::before { background-image: url('https://upload.wikimedia.org/wikipedia/ru/a/a2/Batman_Jim_Lee.jpg'), radial-gradient(circle at 50% 50%, rgba(100, 120, 200, 0.6), transparent 70%); }
#shard-3::before { background-image: url('https://i.redd.it/male-model-francisco-lachowski-on-top-of-being-handsome-asf-v0-rrxuw64ie29c1.jpg?width=471&format=pjpg&auto=webp&s=ad5940bc9724af5d963f08259aeda606dcc6cf2b'), radial-gradient(circle at 50% 50%, rgba(100, 120, 200, 0.6), transparent 70%); }
#shard-4::before { background-image: url('https://bookingagentinfo.com/wp-content/uploads/2206/Jordan-Barrett-1.png'), radial-gradient(circle at 50% 50%, rgba(100, 120, 200, 0.6), transparent 70%); }
#shard-5::before { background-image: url('https://f4.bcbits.com/img/0016828305_10.jpg'), radial-gradient(circle at 50% 50%, rgba(100, 120, 200, 0.6), transparent 70%); }
#shard-6::before { background-image: url('https://www.atj.com/wp-content/uploads/2024/07/Destination-Highlights-Korea1-Highlights-Seoul.jpg'), radial-gradient(circle at 50% 50%, rgba(100, 120, 200, 0.6), transparent 70%); }

#shard-1 { position: absolute; top: 200px; left: 410px; z-index: 100; clip-path: polygon(25.5% 23.6%, 30.7% 19.6%, 39.9% 13.9%, 43.1% 11.7%, 44.7% 8.7%, 55.3% 5.5%, 59.3% 4.8%, 61.7% 3.3%, 62.5% 3.3%, 64.1% 4.1%, 64.9% 4.1%, 73.9% 11.2%, 73.9% 12%, 73.1% 13.6%, 72.3% 16.8%, 71.5% 19.2%, 71.5% 21.6%, 72.3% 23.2%, 72.3% 24.8%, 73.1% 27.2%, 73.1% 28%, 72.3% 29.6%, 67.5% 31.2%, 65.1% 32.8%, 61.9% 32.8%, 57.1% 33.6%, 53.1% 33.6%, 50.1% 34.4%, 48.5% 34.4%, 45.1% 34.4%, 34.3% 29.2%, 29.5% 26.8%); }
#shard-2 { top: 190px; left: 270px; clip-path: polygon(47.5% 60.7%, 49.1% 59.9%, 52.3% 56.1%, 53.9% 55.3%, 60.1% 53.8%, 60.1% 50.8%, 60.9% 46.8%, 61.7% 42.8%, 63.3% 39.7%, 64.9% 37.3%, 67.4% 32%, 64.9% 30.4%, 60.1% 30.4%, 53.9% 32%, 48.3% 33.5%, 45.9% 33.5%, 45.1% 36.6%, 44.4% 37.4%, 42.1% 40.6%, 39.8% 42.2%, 37.4% 44.5%, 34.2% 47.7%, 33.4% 47.7%, 34.2% 50.6%, 34.2% 53.8%, 36.6% 55.3%, 37.4% 58.5%, 39% 60.9%, 40.6% 64.9%); }
#shard-3 { top: -400px; left: -473px; clip-path: polygon(95.6% 53.5%, 96.4% 53.5%, 96.4% 55.9%, 96.4% 59.8%, 96.4% 63.1%, 96.4% 65.6%, 94.9% 70.5%, 94.2% 75.4%, 93.4% 79.5%, 93.4% 81.8%, 92.6% 85.1%, 89.7% 92.4%, 89.7% 94%, 88.2% 94%, 85.2% 94.8%, 81.3% 96.4%, 73.3% 87.8%, 73.3% 81.4%, 73.3% 78.2%, 72.5% 77.4%, 73.3% 75%, 75.6% 74.2%, 78.6% 72.5%, 82.5% 68.4%, 84.1% 63.9%, 86.6% 61.4%); }
#shard-4 { position: absolute; left: -600px; bottom: 100px; z-index: 15; clip-path: polygon(67.1% 85.8%, 67.8% 82.6%, 68.6% 81%, 70.2% 79.4%, 71% 77.1%, 73.4% 75.5%, 74.2% 69.2%, 75.8% 66.1%, 76.6% 62.9%, 76.6% 60.6%, 78.2% 56.5%, 79.8% 53.3%, 81.4% 50.1%, 79% 48.5%, 76.6% 48.5%, 73.4% 49.3%, 69.4% 48.5%, 67.1% 48.5%, 53.8% 60.8%, 53.8% 64.7%, 53% 68.8%, 52.2% 70.4%, 53.8% 72%, 55.4% 75.1%, 56.2% 77.5%, 57% 81.4%, 57.8% 83.7%, 58.6% 84.5%, 60.9% 84.5%, 63.2% 83.7%, 64.8% 85.4%); }
#shard-5 { position: absolute; top: 20px; left: 20px; clip-path: polygon(49.7% 67.2%, 51.3% 72.1%, 52.9% 76.8%, 54.5% 81.5%, 55.3% 85.5%, 54.5% 88.6%, 54.5% 94.1%, 54.5% 97.2%, 54.5% 97.2%, 49.7% 95.7%, 46.1% 96.4%, 43.8% 94.1%, 42.2% 91.8%, 39.9% 91%, 36.9% 83.2%, 39.1% 75.9%, 39.9% 68.6%, 39.9% 64.6%, 42.2% 59.8%, 42.2% 53.4%, 43.8% 48.5%, 46.1% 54%, 46.9% 59.4%); }
#shard-6 { position: absolute; top: -200px; left: 200px; clip-path: polygon(25.6% 54.2%, 24% 43.3%, 21.6% 34.4%, 17.6% 33.6%, 13.8% 29.8%, 8.5% 28.3%, 4.5% 35.6%, 6.9% 45.4%, 6.9% 52.2%, 17.6% 69.4%, 30.1% 72.5%); }

#shard-1 .shard-ui { top: 15%; left: 40%; }
#shard-2 .shard-ui { top: 45%; left: 45%; flex-direction: row-reverse; text-align: right; }
#shard-3 .shard-ui { bottom: 25%; right: 10%; flex-direction: row-reverse; text-align: right; }
#shard-4 .shard-ui { bottom: 25%; left: 65%; }
#shard-5 .shard-ui { bottom: 15%; left: 40%; }
#shard-6 .shard-ui { bottom: 38%; left: 15%; }

.shard.is-breathing { --base-transform: none; animation-timing-function: ease-in-out; animation-iteration-count: infinite; }
@keyframes breathe-1 { 0%, 100% { transform: var(--base-transform) translateY(-6px) translateX(0px) rotateX(-1deg) rotateY(1deg); } 50% { transform: var(--base-transform) translateY(6px) translateX(3px) rotateX(1deg) rotateY(-1deg); } }
@keyframes breathe-2 { 0%, 100% { transform: var(--base-transform) translateY(0px) translateX(-3px) rotateX(1deg) rotateY(0deg); } 50% { transform: var(--base-transform) translateY(-8px) translateX(3px) rotateX(0deg) rotateY(2deg); } }
@keyframes breathe-3 { 0%, 100% { transform: var(--base-transform) translateY(-4px) translateX(-3px) rotateX(0deg) rotateY(-2deg); } 50% { transform: var(--base-transform) translateY(4px) translateX(3px) rotateX(2deg) rotateY(0deg); } }
@keyframes breathe-4 { 0%, 100% { transform: var(--base-transform) translateY(-2px) translateX(0px) rotateX(2deg) rotateY(2deg); } 50% { transform: var(--base-transform) translateY(2px) translateX(-2px) rotateX(-1deg) rotateY(-2deg); } }
@keyframes breathe-5 { 0%, 100% { transform: var(--base-transform) translateY(-7px) translateX(4px) rotateX(-2deg) rotateY(0deg); } 50% { transform: var(--base-transform) translateY(7px) translateX(-4px) rotateX(0deg) rotateY(1deg); } }
@keyframes breathe-6 { 0%, 100% { transform: var(--base-transform) translateY(5px) translateX(1px) rotateX(1deg) rotateY(-1deg); } 50% { transform: var(--base-transform) translateY(-5px) translateX(-2px) rotateX(-1deg) rotateY(2deg); } }
#shard-1.is-breathing { animation-name: breathe-1; animation-duration: 6.8s; animation-delay: -1.0s; }
#shard-2.is-breathing { animation-name: breathe-2; animation-duration: 7.2s; animation-delay: -2.5s; }
#shard-3.is-breathing { animation-name: breathe-3; animation-duration: 6.5s; animation-delay: -0.5s; }
#shard-4.is-breathing { animation-name: breathe-4; animation-duration: 7.5s; animation-delay: -3.2s; }
#shard-5.is-breathing { animation-name: breathe-5; animation-duration: 6.3s; animation-delay: -0.8s; }
#shard-6.is-breathing { animation-name: breathe-6; animation-duration: 7.0s; animation-delay: -1.8s; }

/* --- МЕРЦАЮЩИЕ ЧАСТИЦЫ ПО ВСЕМУ ЭКРАНУ --- */

#flickering-particles-container {
    position: absolute;
    inset: 0;
    pointer-events: none;
    z-index: 50;
}

.flickering-particle {
    position: absolute;
    border-radius: 50%;
    background: #ffffff;
    box-shadow: 
        0 0 4px #fff,
        0 0 8px #fff,
        0 0 12px #aaccff;
    /* УДАЛЕНО: свойство animation теперь задается в JS */
}

@keyframes flicker {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.2; transform: scale(0.7); }
}

/* ДОБАВЛЕНО: Новая анимация для дрейфа к центру */
@keyframes centerPull {
    0%, 100% {
        /* Начальная и конечная точка - это исходное положение частицы */
        transform: translate(0, 0);
    }
    50% {
        /* В середине анимации частица смещается на вектор, рассчитанный в JS */
        transform: translate(var(--target-x), var(--target-y));
    }
}
